<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cobrinha</title>
<style>
  * { box-sizing:border-box; margin:0; padding:0; font-family: Arial, sans-serif; }
  html, body {
    height:100%; width:100%;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    background: radial-gradient(circle at top, #1a237e, #0d133d);
    color:#fff; position:relative; overflow:hidden;
  }
  body::before {
    content:"";
    position:absolute;
    width:200%; height:200%;
    background: radial-gradient(circle, #3949ab33, #1a237e22 70%, transparent 90%);
    animation: rotateBg 25s linear infinite;
    z-index:-1;
  }
  @keyframes rotateBg { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

  .game-container {
    position: relative;
    padding: 30px;
    border: 2px solid rgba(255,255,255,0.25);
    border-radius: 20px;
    backdrop-filter: blur(15px);
    background: rgba(255,255,255,0.08);
    box-shadow: 0 10px 40px rgba(0,0,0,0.7);
    display:flex; flex-direction:column; align-items:center;
    max-width: 800px;
    width: 95%;
  }

  .backBtn {
    position: absolute; top:5px; left:10px;
    padding:10px 20px;
    background: linear-gradient(145deg, #3f51b5, #1a237e);
    color: #fff;
    font-weight: bold;
    border:none; border-radius:15px;
    cursor:pointer; z-index:10;
    transition: all 0.3s ease;
  }
  .backBtn:hover { transform: scale(1.05); background: linear-gradient(145deg, #1a237e, #283593); }

  .hud {
    display:flex; justify-content:center; gap:30px;
    font-size:clamp(1.2rem,2vw,2rem);
    margin:10px 0; flex-wrap:wrap;
  }
  .hud div {
    padding:10px 16px;
    border:2px solid #122231; border-radius:6px;
    background-color:#0f1724; min-width:120px;
    text-align:center; color:#fff;
  }

  #gameWrapper {
    width:100%; max-width:690px;
    aspect-ratio:1/1;
    border:6px solid #000;
    border-radius:15px;
    box-shadow:0 0 25px #000, 0 0 50px #000 inset;
    background: #116611;
    position: relative;
    margin-bottom:20px;
  }
  canvas { width:100%; height:100%; border-radius:12px; display:block; }

  #pausedOverlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: clamp(2rem, 5vw, 4rem);
    color: #f17bb4;
    text-align:center;
    display: none;
    pointer-events: none;
    font-weight: bold;
    letter-spacing: 3px;
  }

  #startScreen {
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    background: rgba(11,18,32,0.95);
    border-radius: 20px;
    border: 2px solid rgba(255,255,255,0.25);
    backdrop-filter: blur(15px);
    box-shadow: 0 10px 40px rgba(0,0,0,0.7);
    text-align:center;
    z-index:10;
  }
  #startScreen h1, #startScreen p {
    margin:10px 0; padding:20px;
    background-color: #0f1724;
    border:2px solid rgba(255,255,255,0.25);
    border-radius:15px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    color: #e6eef8;
  }
  #startScreen h1 { font-size: clamp(2.5rem,5vw,4rem); }
  #startScreen p { font-size: clamp(0.9rem,2.5vw,1.5rem); line-height:1.4; }
  #startScreen button {
    padding:16px 35px; margin:15px;
    border:none; border-radius:15px; font-weight:bold; cursor:pointer;
    font-size:clamp(0.9rem,2.5vw,1.5rem);
    background: linear-gradient(145deg, #3f51b5, #1a237e);
    color:#fff; box-shadow: 0 8px 25px rgba(0,0,0,0.6);
    transition: all 0.3s ease;
  }
  #startScreen button:hover { transform:scale(1.05); background: linear-gradient(145deg, #1a237e, #283593); }

  #controls { text-align:center; margin-bottom:10px; }
  #controls button {
    font-size: clamp(0.9rem, 2vw, 1.3rem);
    padding:6px 12px;
    margin:0 5px;
    border:none;
    border-radius:8px;
    background:#0c1118;
    color:#fff;
    font-weight:bold;
    cursor:pointer;
    transition: all 0.3s ease;
  }
  #controls button:hover { transform:scale(1.05); }

  .other-games {
    display:flex; gap:15px; flex-wrap:wrap; justify-content:center; margin-top:15px;
  }
  .other-games button {
    padding:12px 25px;
    font-size:1.1rem;
    border:none;
    border-radius:15px;
    cursor:pointer;
    background: linear-gradient(145deg, #3f51b5, #1a237e);
    color:#fff;
    box-shadow:0 8px 25px rgba(0,0,0,0.6);
    transition: all 0.3s ease;
  }
  .other-games button:hover {
    transform: scale(1.05);
    background: linear-gradient(145deg, #1a237e, #283593);
  }
</style>
</head>
<body>
<div class="game-container">
  <button class="backBtn" onclick="goBack()">Voltar</button>

  <!-- Tela inicial -->
  <div id="startScreen">
    <h1>Cobrinha</h1>
    <p>Controles:<br>- Setas: mover<br>- Espaço: pausar/jogar</p>
    <p>Vidas: <span id="startLives">3</span></p>
    <button id="startBtn">Começar</button>
  </div>

  <div class="hud">
    <div>Pontos: <span id="score">0</span></div>
    <div>Vidas: <span id="lives">3</span></div>
    <div>Pausado: <span id="paused">Não</span></div>
  </div>

  <div id="gameWrapper">
    <canvas id="gameCanvas"></canvas>
  </div>

  <div id="controls">
    <button id="restartBtn" style="display:none;">Reiniciar</button>
  </div>

  <div class="other-games">
    <button onclick="window.location.href='falling.html'">Falling</button>
    <button onclick="window.location.href='jogoVelha.html'">Jogo da Velha</button>
  </div>
</div>

<audio id="bgMusic" src="cobra.mp3" loop></audio>
<audio id="biteSound" src="bite.mp3"></audio>
<audio id="hitSound" src="https://www.soundjay.com/button/button-10.wav"></audio>
<img id="foodImg" src="rato.png" style="display:none;">

<script>
// Código completo do Snake original, apenas adaptando canvas para o gameWrapper
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const startScreen = document.getElementById('startScreen');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');

const scoreEl = document.getElementById('score');
const livesEl = document.getElementById('lives');
const startLivesEl = document.getElementById('startLives');
const pausedEl = document.getElementById('paused');

const bgMusic = document.getElementById('bgMusic');
const biteSound = document.getElementById('biteSound');
const hitSound = document.getElementById('hitSound');
const foodImg = document.getElementById('foodImg');

let snake = [];
let direction = 'RIGHT';
let food = {};
let score = 0;
let lives = 3;
let gameInterval;
let isPaused = false;
const gridSize = 20;
let cellSize;

function resizeCanvas(){
  const wrapper = document.getElementById('gameWrapper');
  canvas.width = wrapper.clientWidth;
  canvas.height = wrapper.clientHeight;
  cellSize = canvas.width / gridSize;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function placeFood() {
  food = { x: Math.floor(Math.random()*gridSize), y: Math.floor(Math.random()*gridSize) };
}

function initGame() {
  snake = [{x:10, y:10}];
  direction='RIGHT';
  score=0; lives=3;
  scoreEl.textContent = score;
  livesEl.textContent = lives;
  startLivesEl.textContent = lives;
  pausedEl.textContent='Não';
  startScreen.style.display='none';
  isPaused=false;
  placeFood();
  bgMusic.play().catch(()=>{});
  if(gameInterval) clearInterval(gameInterval);
  gameInterval = setInterval(gameLoop,150);
  drawGame();
}

function gameLoop() {
  if(isPaused) return;
  const head = {...snake[0]};
  if(direction==='RIGHT') head.x++;
  if(direction==='LEFT') head.x--;
  if(direction==='UP') head.y--;
  if(direction==='DOWN') head.y++;

  if(head.x<0||head.x>=gridSize||head.y<0||snake.some(s=>s.x===head.x&&s.y===head.y)){
    loseLife(); return;
  }
  snake.unshift(head);
  if(head.x===food.x&&head.y===food.y){
    score+=10; scoreEl.textContent=score;
    biteSound.currentTime=0; biteSound.play();
    placeFood();
  } else { snake.pop(); }
  drawGame();
}

function loseLife(){
  lives--;
  livesEl.textContent = lives;
  startLivesEl.textContent = lives;
  hitSound.currentTime=0; hitSound.play();
  if(lives<=0){
    alert("Game Over!");
    startScreen.style.display='flex';
    clearInterval(gameInterval);
  } else { snake=[{x:10,y:10}]; direction='RIGHT'; }
}

function drawGrass(){
  ctx.fillStyle='#116611';
  ctx.fillRect(0function drawGame() {
  // Limpa canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Desenha fundo
  drawGrass();

  // Desenha comida
  ctx.drawImage(foodImg, food.x * cellSize, food.y * cellSize, cellSize, cellSize);

  // Desenha cobra
  ctx.fillStyle = '#00ff00';
  snake.forEach((segment, index) => {
    ctx.fillRect(segment.x * cellSize, segment.y * cellSize, cellSize, cellSize);
    ctx.strokeStyle = '#003300';
    ctx.strokeRect(segment.x * cellSize, segment.y * cellSize, cellSize, cellSize);
  });
}

// Controles
window.addEventListener('keydown', e => {
  if(e.key==='ArrowUp' && direction!=='DOWN') direction='UP';
  if(e.key==='ArrowDown' && direction!=='UP') direction='DOWN';
  if(e.key==='ArrowLeft' && direction!=='RIGHT') direction='LEFT';
  if(e.key==='ArrowRight' && direction!=='LEFT') direction='RIGHT';
  if(e.code==='Space') {
    isPaused = !isPaused;
    pausedEl.textContent = isPaused ? 'Sim' : 'Não';
  }
});

// Botões
startBtn.addEventListener('click', initGame);
restartBtn.addEventListener('click', initGame);

function goBack() {
  window.location.href = 'index.html';
  bgMusic.pause();
}
</script>
</body>
</html>

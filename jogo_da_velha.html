<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Velha Responsivo</title>
<style>
  * { box-sizing:border-box; margin:0; padding:0; font-family:Arial,sans-serif; }
  body, html { height:100%; width:100%; display:flex; flex-direction:column; justify-content:flex-start; align-items:center; background:#1e293b; color:#e2e8f0; overflow:hidden; }

  h1 { margin:2vh 0; text-align:center; font-size:clamp(20px,4vw,36px); text-shadow:0 0 12px #38bdf8; }

  /* HUD */
  .hud { display:flex; justify-content:space-between; width:90%; max-width:400px; font-weight:bold; margin-bottom:1vh; font-size:clamp(14px,2.5vw,18px); }

  /* Tela inicial */
  #startScreen {
    display:flex; flex-direction:column; align-items:center; margin-top:2vh; background:#334155; padding:20px; border-radius:10px;
    box-shadow:0 0 12px #38bdf8; width:90%; max-width:400px; text-align:center;
  }
  #startScreen h2 { margin-bottom:15px; }
  .option-btn { padding:10px 20px; margin:10px 0; border:none; border-radius:6px; background:#0ea5e9; color:white; font-size:clamp(16px,2.5vw,20px); cursor:pointer; width:80%; max-width:250px; box-shadow:0 0 10px #0ea5e9; }
  .option-btn:hover { background:#0284c7; }

  .hidden { display:none; }

  /* Sele√ß√µes IA */
  .ia-options { display:flex; flex-direction:column; align-items:center; margin-top:10px; }
  .ia-options select, .ia-options button { margin:5px 0; padding:8px 15px; border-radius:6px; border:none; font-size:clamp(14px,2.5vw,18px); cursor:pointer; }

  /* Tabuleiro */
  #boardContainer { display:flex; align-items:center; justify-content:center; flex-grow:1; width:100%; max-width:600px; padding:10px; }
  #board { display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr); gap:5px; width:100%; aspect-ratio:1/1; }
  .cell { background:#111827; display:flex; align-items:center; justify-content:center; font-size:clamp(24px,10vw,64px); cursor:pointer; border-radius:6px; text-shadow:0 0 8px #fff; user-select:none; }
  .cell.X { color:#f43f5e; text-shadow:0 0 10px #f43f5e; }
  .cell.O { color:#3b82f6; text-shadow:0 0 10px #3b82f6; }

  /* Bot√£o pr√≥ximo */
  #nextBtn { margin:10px 0; padding:10px 20px; border:none; border-radius:6px; background:#0ea5e9; color:white; font-size:clamp(16px,2.5vw,20px); cursor:pointer; box-shadow:0 0 10px #0ea5e9; display:none; }
  #nextBtn:hover { background:#0284c7; }
</style>
</head>
<body>

<h1>‚ú® Jogo da Velha ‚ú®</h1>

<div class="hud">
  <div>Pontos X: <span id="scoreX">0</span></div>
  <div>Pontos O: <span id="scoreO">0</span></div>
</div>

<div id="startScreen">
  <h2>Escolha o modo de jogo</h2>
  <button class="option-btn" id="aiBtn">Contra a IA</button>
  <button class="option-btn" id="multiBtn">Multiplayer Local</button>

  <div class="ia-options hidden" id="iaOptions">
    <label>
      S√≠mbolo:
      <select id="playerSymbol">
        <option value="X">‚ùå X</option>
        <option value="O">‚≠ï O</option>
      </select>
    </label>
    <label>
      Dificuldade:
      <select id="difficulty">
        <option value="easy">F√°cil</option>
        <option value="medium" selected>M√©dio</option>
        <option value="hard">Dif√≠cil</option>
      </select>
    </label>
    <button class="option-btn" id="startAiBtn">Come√ßar</button>
  </div>

  <button class="option-btn" id="musicBtn">üéµ M√∫sica</button>
</div>

<div id="boardContainer" class="hidden">
  <div id="board"></div>
</div>
<button id="nextBtn">Pr√≥xima Rodada</button>

<audio id="bgMusic" src="Fundo.mp3" loop></audio>

<script>
// ==== Elementos ====
const startScreen = document.getElementById("startScreen");
const aiBtn = document.getElementById("aiBtn");
const multiBtn = document.getElementById("multiBtn");
const iaOptions = document.getElementById("iaOptions");
const startAiBtn = document.getElementById("startAiBtn");
const musicBtn = document.getElementById("musicBtn");
const bgMusic = document.getElementById("bgMusic");
const boardContainer = document.getElementById("boardContainer");
const boardEl = document.getElementById("board");
const nextBtn = document.getElementById("nextBtn");
const scoreXEl = document.getElementById("scoreX");
const scoreOEl = document.getElementById("scoreO");

const playerSymbolEl = document.getElementById("playerSymbol");
const difficultyEl = document.getElementById("difficulty");

let scoreX=0, scoreO=0;
let board = Array(9).fill(null);
let player="X", ai="O", difficulty="medium", mode="single", currentTurn="X", gameOver=false;
let musicPlaying=true;

// ==== M√∫sica ====
bgMusic.play().catch(()=>{}); // autoplay
musicBtn.addEventListener("click",()=>{
  if(musicPlaying){ bgMusic.pause(); musicPlaying=false; musicBtn.textContent="üéµ M√∫sica"; }
  else{ bgMusic.play().catch(()=>{}); musicPlaying=true; musicBtn.textContent="‚è∏Ô∏è Pausar M√∫sica"; }
});

// ==== Fun√ß√µes ====
function updateHUD(){ scoreXEl.textContent=scoreX; scoreOEl.textContent=scoreO; }

function createBoard(){ 
  boardEl.innerHTML=""; board=Array(9).fill(null); 
  for(let i=0;i<9;i++){
    const cell=document.createElement("div"); cell.classList.add("cell"); cell.dataset.index=i;
    cell.addEventListener("click",()=>playerMove(i));
    boardEl.appendChild(cell);
  }
}

function playerMove(index){
  if(gameOver||board[index]) return;
  board[index] = currentTurn;
  renderBoard();
  if(checkWinner(currentTurn)){
    if(mode==="multi"){
      if(currentTurn==="X") scoreX++; else scoreO++;
      updateHUD();
      alert(`Jogador ${currentTurn} ganhou!`);
      gameOver=true; nextBtn.style.display="block"; return;
    } else {
      if(currentTurn===player) { scoreX++; } else { scoreO++; }
      updateHUD(); alert("Voc√™ ganhou!"); gameOver=true; nextBtn.style.display="block"; return;
    }
  }
  if(board.every(c=>c)){ gameOver=true; alert("Empate!"); nextBtn.style.display="block"; return; }

  // Alterna turno
  if(mode==="multi") currentTurn = (currentTurn==="X")?"O":"X";
  else aiMove();
}

function aiMove(){
  const empty = board.map((v,i)=>v?null:i).filter(v=>v!==null);
  if(empty.length===0) return;
  let move;
  if(difficulty==="easy") move = empty[Math.floor(Math.random()*empty.length)];
  else move = empty[0]; // simplificado
  board[move] = ai;
  renderBoard();
  if(checkWinner(ai)){
    scoreO++; updateHUD(); alert("Voc√™ perdeu!"); gameOver=true; nextBtn.style.display="block"; return;
  }
  if(board.every(c=>c)){ gameOver=true; alert("Empate!"); nextBtn.style.display="block"; }
}

function renderBoard(){ const cells=document.querySelectorAll(".cell"); board.forEach((v,i)=>{ cells[i].textContent=v||""; cells[i].className="cell "+(v||""); }); }

function checkWinner(p){ const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]; return wins.some(c=>c.every(i=>board[i]===p)); }

function startGame(selectedMode){
  mode = selectedMode;
  boardContainer.classList.remove("hidden");
  startScreen.classList.add("hidden");
  createBoard();
  gameOver=false;
  currentTurn="X";
}

// ==== Eventos ====
aiBtn.addEventListener("click",()=>{ iaOptions.classList.remove("hidden"); });
multiBtn.addEventListener("click",()=>{ startGame("multi"); });

startAiBtn.addEventListener("click",()=>{
  player = playerSymbolEl.value;
  ai = (player==="X")?"O":"X";
  difficulty = difficultyEl.value;
  startGame("single");
});

nextBtn.addEventListener("click",()=>{
  createBoard(); gameOver=false; nextBtn.style.display="none"; currentTurn="X";
});

updateHUD();
</script>
</body>
</html>

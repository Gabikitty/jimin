<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Velha</title>
<style>
  body {
    margin:0; padding:0; font-family:Arial,sans-serif;
    background:#1e293b; color:#e2e8f0;
    display:flex; flex-direction:column; align-items:center;
    min-height:100vh;
  }
  h1 { margin:20px 0; font-size:clamp(24px,6vw,36px); text-shadow:0 0 12px #38bdf8; text-align:center; }

  .screen {
    display:flex; flex-direction:column; align-items:center;
    background:#334155; padding:25px 20px; border-radius:15px;
    box-shadow:0 0 15px #38bdf8; width:90%; max-width:400px;
    margin-bottom:20px;
  }
  .screen p { font-size:clamp(16px,3vw,20px); margin-bottom:15px; text-align:center; }

  .buttons { display:flex; flex-direction:column; width:100%; gap:10px; }
  .buttons button {
    padding:12px 0; border:none; border-radius:8px;
    font-size:clamp(16px,3vw,20px); cursor:pointer;
    font-weight:bold; color:white;
    background:#0ea5e9; box-shadow:0 0 10px #0ea5e9;
    transition:0.2s;
  }
  .buttons button:hover { background:#0284c7; box-shadow:0 0 15px #38bdf8; }

  .option-group { display:flex; flex-direction:column; width:100%; margin-bottom:15px; }
  .option-group label { font-weight:bold; margin-bottom:5px; }
  .option-group select {
    padding:10px; border-radius:8px; border:none; font-size:clamp(14px,2.5vw,18px);
    background:#0ea5e9; color:white; box-shadow:0 0 8px #0ea5e9; cursor:pointer;
  }

  #boardContainer { display:flex; flex-direction:column; align-items:center; width:100%; max-width:600px; }
  #board { display:grid; grid-template-columns:repeat(3,1fr); grid-gap:5px; width:100%; aspect-ratio:1/1; }
  .cell {
    background:#111827; display:flex; justify-content:center; align-items:center;
    font-size:clamp(24px,10vw,64px); border-radius:6px; cursor:pointer; text-shadow:0 0 8px #fff;
    user-select:none; transition:0.2s;
  }
  .cell:hover { background:#1f2937; }
  .cell.X { color:#f43f5e; text-shadow:0 0 10px #f43f5e; }
  .cell.O { color:#3b82f6; text-shadow:0 0 10px #3b82f6; }

  .hud { display:flex; justify-content:space-between; width:90%; max-width:400px; font-weight:bold; font-size:clamp(14px,2.5vw,18px); margin-bottom:10px; }

  #nextBtn { margin:10px 0; padding:12px 0; width:90%; max-width:250px; font-size:clamp(16px,3vw,20px);
    border-radius:8px; border:none; cursor:pointer; font-weight:bold; color:white; background:#0ea5e9;
    box-shadow:0 0 10px #0ea5e9; transition:0.2s;
  }
  #nextBtn:hover { background:#0284c7; box-shadow:0 0 15px #38bdf8; }
</style>
</head>
<body>

<h1>✨ Jogo da Velha ✨</h1>

<!-- Tela de escolha de modo -->
<div id="modeScreen" class="screen">
  <p>Escolha o modo de jogo</p>
  <div class="buttons">
    <button id="singleBtn">Contra IA</button>
    <button id="multiBtn">Multiplayer Local</button>
  </div>
</div>

<!-- Tela de opções IA -->
<div id="aiOptionsScreen" class="screen" style="display:none;">
  <p>Escolha símbolo e dificuldade</p>
  <div class="option-group">
    <label for="playerSymbol">Símbolo:</label>
    <select id="playerSymbol"><option value="X">❌ X</option><option value="O">⭕ O</option></select>
  </div>
  <div class="option-group">
    <label for="difficulty">Dificuldade:</label>
    <select id="difficulty"><option value="easy">Fácil</option><option value="medium" selected>Médio</option><option value="hard">Difícil</option></select>
  </div>
  <div class="buttons">
    <button id="startBtn">Start</button>
  </div>
</div>

<!-- HUD para multiplayer local -->
<div class="hud" id="multiHud" style="display:none;">
  <div>X: <span id="scoreX">0</span></div>
  <div>O: <span id="scoreO">0</span></div>
</div>

<!-- Tabuleiro -->
<div id="boardContainer" style="display:none;">
  <div id="board"></div>
</div>
<button id="nextBtn" style="display:none;">Próxima Rodada</button>

<script>
const modeScreen = document.getElementById("modeScreen");
const aiOptionsScreen = document.getElementById("aiOptionsScreen");
const startBtn = document.getElementById("startBtn");
const singleBtn = document.getElementById("singleBtn");
const multiBtn = document.getElementById("multiBtn");
const boardContainer = document.getElementById("boardContainer");
const boardEl = document.getElementById("board");
const multiHud = document.getElementById("multiHud");
const scoreXEl = document.getElementById("scoreX");
const scoreOEl = document.getElementById("scoreO");

let board = Array(9).fill(null);
let currentTurn = "X";
let player="X", ai="O";
let mode="single";
let difficulty="medium";
let scoreX=0, scoreO=0;
let gameOver=false;

function createBoard(){
  boardEl.innerHTML=""; board=Array(9).fill(null);
  for(let i=0;i<9;i++){
    const cell=document.createElement("div");
    cell.classList.add("cell");
    cell.dataset.index=i;
    cell.addEventListener("click",()=>playerMove(i));
    boardEl.appendChild(cell);
  }
}

function renderBoard(){
  const cells=document.querySelectorAll(".cell");
  board.forEach((v,i)=>{ cells[i].textContent=v||""; cells[i].className="cell "+(v||""); });
}

function checkWinner(p){
  const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return wins.some(c=>c.every(i=>board[i]===p));
}

function playerMove(index){
  if(gameOver || board[index]) return;
  if(mode==="single"){
    board[index]=player; renderBoard();
    if(checkWinner(player)){ alert("Você ganhou!"); gameOver=true; return; }
    if(board.every(c=>c)){ alert("Empate!"); gameOver=true; return; }
    aiMove();
  } else {
    board[index]=currentTurn; renderBoard();
    if(checkWinner(currentTurn)){ alert(`Jogador ${currentTurn} ganhou!`); if(currentTurn==="X"){scoreX++;}else{scoreO++;} updateMultiHUD(); gameOver=true; return;}
    if(board.every(c=>c)){ alert("Empate!"); gameOver=true; return; }
    currentTurn=(currentTurn==="X")?"O":"X";
  }
}

function aiMove(){
  const empty=board.map((v,i)=>v?null:i).filter(v=>v!==null);
  const move=empty[Math.floor(Math.random()*empty.length)];
  board[move]=ai; renderBoard();
  if(checkWinner(ai)){ alert("IA venceu!"); gameOver=true; return; }
}

function updateMultiHUD(){ scoreXEl.textContent=scoreX; scoreOEl.textContent=scoreO; }

// ----- Eventos -----
singleBtn.addEventListener("click",()=>{ mode="single"; modeScreen.style.display="none"; aiOptionsScreen.style.display="flex"; });
multiBtn.addEventListener("click",()=>{
  mode="multi"; modeScreen.style.display="none";
  boardContainer.style.display="flex"; multiHud.style.display="flex"; createBoard();
});

startBtn.addEventListener("click",()=>{
  player=document.getElementById("playerSymbol").value;
  ai=(player==="X")?"O":"X";
  difficulty=document.getElementById("difficulty").value;
  aiOptionsScreen.style.display="none";
  boardContainer.style.display="flex";
  createBoard();
});

</script>
</body>
</html>
